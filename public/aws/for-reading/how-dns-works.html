<!DOCTYPE html> <html><head>
		<title>How DNS Works</title>
		<base href="..\../">
		<meta id="root-path" root-path="..\../">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">
		<meta charset="UTF-8">
		<meta name="description" content="CloudBlitz - How DNS Works">
		<meta property="og:title" content="How DNS Works">
		<meta property="og:description" content="CloudBlitz - How DNS Works">
		<meta property="og:type" content="website">
		<meta property="og:url" content="aws/for-reading/how-dns-works.html">
		<meta property="og:image" content="https://cf-assets.www.cloudflare.com/slt3lc6tev37/5exJlPlwAT2kQCITQhrIi9/1f771294e218b64c0490e83968075766/what_is_dns.png">
		<meta property="og:site_name" content="CloudBlitz">
		<script async="" id="webpage-script" src="lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script type="module" async="" id="graph-view-script" src="lib/scripts/graph-view.js"></script><script async="" id="graph-wasm-script" src="lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="tinycolor-script" src="lib/scripts/tinycolor.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="pixi-script" src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.4.0/pixi.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="minisearch-script" src="https://cdn.jsdelivr.net/npm/minisearch@6.3.0/dist/umd/index.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="lib/media/favicon.png"><script async="" id="graph-data-script" src="lib/scripts/graph-data.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-horizontal-spacing:0.6em;--tree-vertical-spacing:0.6em;--sidebar-margin:12px}.sidebar{height:100%;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));font-size:14px;z-index:10;position:relative;overflow:hidden;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}.sidebar-left{left:0}.sidebar-right{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}body.floating-sidebars .sidebar{position:absolute}.sidebar-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .sidebar-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}.sidebar-left .sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}.sidebar-right .sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar:has(.sidebar-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:2em;width:var(--sidebar-width);top:var(--sidebar-margin);padding-inline:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}.sidebar-left .sidebar-topbar{left:0}.sidebar-right .sidebar-topbar{right:0}.topbar-content{overflow:hidden;overflow:clip;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:0!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}.sidebar-left .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}.sidebar-right .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.sidebar-section-header{margin:0 0 1em 0;text-transform:uppercase;letter-spacing:.06em;font-weight:600}body{transition:background-color var(--color-fade-speed) ease-in-out}.webpage-container{display:flex;flex-direction:row;height:100%;width:100%;align-items:stretch;justify-content:center}.document-container{opacity:1;flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0;transition:opacity .2s ease-in-out}.document-container>.markdown-preview-view{margin:var(--sidebar-margin);margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;background-color:var(--background-primary);transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}.document-container>.markdown-preview-view>.markdown-preview-sizer{padding-bottom:80vh!important;width:100%!important;max-width:var(--line-width)!important;flex-basis:var(--line-width)!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}.markdown-rendered img:not([width]),.view-content img:not([width]){max-width:100%;outline:0}.document-container>.view-content.embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}.document-container>.view-content.embed>*{max-width:100%;max-height:100%;object-fit:contain}:has(> :is(.math,table)){overflow-x:auto!important}.document-container>.view-content{overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){if("file:"!=location.protocol){let e=document.querySelectorAll("include");for(let t=0;t<e.length;t++){let o=e[t],l=o.getAttribute("src");try{const e=await fetch(l);if(!e.ok){console.log("Could not include file: "+l),o?.remove();continue}let t=await e.text(),n=document.createRange().createContextualFragment(t),i=Array.from(n.children);for(let e of i)e.classList.add("hide"),e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e.classList.remove("hide")}),10);o.before(n),o.remove(),console.log("Included file: "+l)}catch(e){o?.remove(),console.log("Could not include file: "+l,e);continue}}}else{if(document.querySelectorAll("include").length>0){var e=document.createElement("div");e.id="error",e.textContent="Web server exports must be hosted on an http / web server to be viewed correctly.",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.fontSize="1.5em",e.style.fontWeight="bold",e.style.textAlign="center",document.body.appendChild(e),document.querySelector(".document-container")?.classList.remove("hide")}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script"))),l=0;!function e(){let n=o[l];l++,n&&"true"!=n.getAttribute("loaded")||l<o.length&&e(),l<o.length?n.addEventListener("load",e):t()}()}</script><link rel="stylesheet" href="lib/styles/obsidian.css"><link rel="preload" href="lib/styles/other-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/other-plugins.css"></noscript><link rel="stylesheet" href="lib/styles/theme.css"><link rel="preload" href="lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/main-styles.css"></noscript></head><body class="publish css-settings-manager theme-dark show-inline-title show-ribbon"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="webpage-container workspace"><div class="sidebar-left sidebar"><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="search-input-container"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div class="search-input-clear-button" aria-label="Clear search"></div></div><include src="lib/html/file-tree.html"></include></div><script defer="">let ls = document.querySelector(".sidebar-left"); ls.classList.add("is-collapsed"); if (window.innerWidth > 768) ls.classList.remove("is-collapsed"); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div><div class="document-container markdown-reading-view hide"><div class="markdown-preview-view markdown-rendered allow-fold-headings allow-fold-lists is-readable-line-width"><style id="MJX-CHTML-styles"></style><div class="markdown-preview-sizer markdown-preview-section"><h1 class="page-title heading inline-title" id="How DNS Works"><p dir="auto">How DNS Works</p></h1><div class="el-h2 heading-wrapper"><h2 data-heading="What is DNS?" dir="auto" class="heading" id="What_is_DNS?"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>What is DNS?</h2><div class="heading-children"><div class="el-p"><p dir="auto">The Domain Name System (DNS) is the phonebook of the Internet. Humans access information online through&nbsp;<a data-tooltip-position="top" aria-label="https://www.cloudflare.com/learning/dns/glossary/what-is-a-domain-name/" rel="noopener nofollow" class="external-link" href="https://www.cloudflare.com/learning/dns/glossary/what-is-a-domain-name/" target="_blank">domain names</a>, like nytimes.com or espn.com. Web browsers interact through&nbsp;<a data-tooltip-position="top" aria-label="https://www.cloudflare.com/learning/network-layer/internet-protocol/" rel="noopener nofollow" class="external-link" href="https://www.cloudflare.com/learning/network-layer/internet-protocol/" target="_blank">Internet Protocol (IP)</a>&nbsp;addresses. DNS translates domain names to&nbsp;<a data-tooltip-position="top" aria-label="https://www.cloudflare.com/learning/dns/glossary/what-is-my-ip-address/" rel="noopener nofollow" class="external-link" href="https://www.cloudflare.com/learning/dns/glossary/what-is-my-ip-address/" target="_blank">IP addresses</a>&nbsp;so browsers can load Internet resources.</p></div><div class="el-p"><p dir="auto">Each device connected to the Internet has a unique IP address which other machines use to find the device. DNS servers eliminate the need for humans to memorize IP addresses such as 192.168.1.1 (in IPv4), or more complex newer alphanumeric IP addresses such as 2400:cb00:2048:1::c629:d7a2 (in IPv6).</p></div><div class="el-p"><p dir="auto"><img title="What is DNS?" alt="DNS - magnifying glass examines IP addresses, finds www.example.com" src="https://cf-assets.www.cloudflare.com/slt3lc6tev37/5exJlPlwAT2kQCITQhrIi9/1f771294e218b64c0490e83968075766/what_is_dns.png" referrerpolicy="no-referrer"></p></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="How does DNS work?" dir="auto" class="heading" id="How_does_DNS_work?"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>How does DNS work?</h2><div class="heading-children"><div class="el-p"><p dir="auto">The process of DNS resolution involves converting a hostname (such as <a data-tooltip-position="top" aria-label="http://www.example.com" rel="noopener nofollow" class="external-link" href="http://www.example.com" target="_blank">www.example.com</a>) into a computer-friendly IP address (such as 192.168.1.1). An IP address is given to each device on the Internet, and that address is necessary to find the appropriate Internet device - like a street address is used to find a particular home. When a user wants to load a webpage, a translation must occur between what a user types into their web browser (example.com) and the machine-friendly address necessary to locate the example.com webpage.</p></div><div class="el-p"><p dir="auto">In order to understand the process behind the DNS resolution, it’s important to learn about the different hardware components a DNS query must pass between. For the web browser, the DNS lookup occurs "behind the scenes" and requires no interaction from the user’s computer apart from the initial request.</p></div><div class="el-p"><p dir="auto">Report</p></div><div class="el-p"><p dir="auto">2023 GigaOm Radar for DNS Security</p></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://www.cloudflare.com/lp/gigaom-radar-dns-security/" rel="noopener nofollow" class="external-link" href="https://www.cloudflare.com/lp/gigaom-radar-dns-security/" target="_blank">Get the report</a></p></div><div class="el-p"><p dir="auto">Report</p></div><div class="el-p"><p dir="auto">Read the Q4 2023 DDoS Threat Landscape Report</p></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://www.cloudflare.com/lp/ddos-threat-report-2023-q4/" rel="noopener nofollow" class="external-link" href="https://www.cloudflare.com/lp/ddos-threat-report-2023-q4/" target="_blank">Get the report</a></p></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="There are 4 DNS servers involved in loading a webpage:" dir="auto" class="heading" id="There_are_4_DNS_servers_involved_in_loading_a_webpage:"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>There are 4 DNS servers involved in loading a webpage:</h2><div class="heading-children"><div class="el-ul"><ul>
<li data-line="0" dir="auto"><strong><a data-tooltip-position="top" aria-label="https://www.cloudflare.com/learning/dns/dns-server-types/" rel="noopener nofollow" class="external-link" href="https://www.cloudflare.com/learning/dns/dns-server-types/" target="_blank">DNS recursor</a></strong>&nbsp;- The recursor can be thought of as a librarian who is asked to go find a particular book somewhere in a library. The DNS recursor is a server designed to receive queries from client machines through applications such as web browsers. Typically the recursor is then responsible for making additional requests in order to satisfy the client’s DNS query.</li>
<li data-line="1" dir="auto"><strong>Root nameserver</strong>&nbsp;- The&nbsp;<a data-tooltip-position="top" aria-label="https://www.cloudflare.com/learning/dns/glossary/dns-root-server/" rel="noopener nofollow" class="external-link" href="https://www.cloudflare.com/learning/dns/glossary/dns-root-server/" target="_blank">root server</a>&nbsp;is the first step in translating (resolving) human readable host names into IP addresses. It can be thought of like an index in a library that points to different racks of books - typically it serves as a reference to other more specific locations.</li>
<li data-line="2" dir="auto"><strong><a data-tooltip-position="top" aria-label="https://www.cloudflare.com/learning/dns/dns-server-types/" rel="noopener nofollow" class="external-link" href="https://www.cloudflare.com/learning/dns/dns-server-types/" target="_blank">TLD nameserver</a></strong>&nbsp;- The top level domain server (<a data-tooltip-position="top" aria-label="https://www.cloudflare.com/learning/dns/top-level-domain/" rel="noopener nofollow" class="external-link" href="https://www.cloudflare.com/learning/dns/top-level-domain/" target="_blank">TLD</a>) can be thought of as a specific rack of books in a library. This nameserver is the next step in the search for a specific IP address, and it hosts the last portion of a hostname (In example.com, the TLD server is “com”).</li>
<li data-line="3" dir="auto"><strong><a data-tooltip-position="top" aria-label="https://www.cloudflare.com/learning/dns/dns-server-types/" rel="noopener nofollow" class="external-link" href="https://www.cloudflare.com/learning/dns/dns-server-types/" target="_blank">Authoritative nameserver</a></strong>&nbsp;- This final nameserver can be thought of as a dictionary on a rack of books, in which a specific name can be translated into its definition. The authoritative nameserver is the last stop in the nameserver query. If the authoritative name server has access to the requested record, it will return the IP address for the requested hostname back to the DNS Recursor (the librarian) that made the initial request.</li>
</ul></div><div class="el-p"><p dir="auto">Fast &amp; Secure DNS</p></div><div class="el-p"><p dir="auto">Free DNS included with any Cloudflare plan</p></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://www.cloudflare.com/plans/" rel="noopener nofollow" class="external-link" href="https://www.cloudflare.com/plans/" target="_blank">Start for free</a></p></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="What's the difference between an authoritative DNS server and a recursive DNS resolver?" dir="auto" class="heading" id="What's_the_difference_between_an_authoritative_DNS_server_and_a_recursive_DNS_resolver?"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>What's the difference between an authoritative DNS server and a recursive DNS resolver?</h2><div class="heading-children"><div class="el-p"><p dir="auto">Both concepts refer to servers (groups of servers) that are integral to the DNS infrastructure, but each performs a different role and lives in different locations inside the pipeline of a DNS query. One way to think about the difference is the&nbsp;<a data-tooltip-position="top" aria-label="https://www.cloudflare.com/learning/dns/what-is-recursive-dns/" rel="noopener nofollow" class="external-link" href="https://www.cloudflare.com/learning/dns/what-is-recursive-dns/" target="_blank">recursive</a>&nbsp;resolver is at the beginning of the DNS query and the authoritative nameserver is at the end.</p></div><div class="el-h4 heading-wrapper"><h4 data-heading="Recursive DNS resolver" dir="auto" class="heading" id="Recursive_DNS_resolver"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Recursive DNS resolver</h4><div class="heading-children"><div class="el-p"><p dir="auto">The recursive resolver is the computer that responds to a recursive request from a client and takes the time to track down the&nbsp;<a data-tooltip-position="top" aria-label="https://www.cloudflare.com/learning/dns/dns-records/" rel="noopener nofollow" class="external-link" href="https://www.cloudflare.com/learning/dns/dns-records/" target="_blank">DNS record</a>. It does this by making a series of requests until it reaches the authoritative DNS nameserver for the requested record (or times out or returns an error if no record is found). Luckily, recursive DNS resolvers do not always need to make multiple requests in order to track down the records needed to respond to a client;&nbsp;<a data-tooltip-position="top" aria-label="https://www.cloudflare.com/learning/cdn/what-is-caching/" rel="noopener nofollow" class="external-link" href="https://www.cloudflare.com/learning/cdn/what-is-caching/" target="_blank">caching</a>&nbsp;is a data persistence process that helps short-circuit the necessary requests by serving the requested resource record earlier in the DNS lookup.</p></div><div class="el-p"><p dir="auto"><img title="DNS Record Request Sequence - Recursive Resolver" alt="DNS Record Request Sequence - DNS Recursive Resolver gets request from client" src="https://cf-assets.www.cloudflare.com/slt3lc6tev37/3NOmAzkfPG8FTA8zLc7Li8/8efda230b212c0de2d3bbcb408507b1e/dns_record_request_sequence_recursive_resolver.png" referrerpolicy="no-referrer"></p></div></div></div><div class="el-h4 heading-wrapper"><h4 data-heading="Authoritative DNS server" dir="auto" class="heading" id="Authoritative_DNS_server"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Authoritative DNS server</h4><div class="heading-children"><div class="el-p"><p dir="auto">Put simply, an authoritative DNS server is a server that actually holds, and is responsible for, DNS resource records. This is the server at the bottom of the DNS lookup chain that will respond with the queried resource record, ultimately allowing the web browser making the request to reach the IP address needed to access a website or other web resources. An authoritative nameserver can satisfy queries from its own data without needing to query another source, as it is the final source of truth for certain DNS records.</p></div><div class="el-p"><p dir="auto"><img title="DNS Record Request Sequence - Authoritative Nameserver" alt="DNS Record Request Sequence - DNS query reaches authoritative nameserver for cloudflare.com" src="https://cf-assets.www.cloudflare.com/slt3lc6tev37/6Cxvsc4NOvmU4pPkKbkDmP/a7588a4c8a3c187e9175a40fa1b3d548/dns_record_request_sequence_authoritative_nameserver.png" referrerpolicy="no-referrer"></p></div><div class="el-p"><p dir="auto">It’s worth mentioning that in instances where the query is for a subdomain such as foo.example.com or&nbsp;<a data-tooltip-position="top" aria-label="https://blog.cloudflare.com/" rel="noopener nofollow" class="external-link" href="https://blog.cloudflare.com/" target="_blank">blog.cloudflare.com</a>, an additional nameserver will be added to the sequence after the authoritative nameserver, which is responsible for storing the subdomain’s&nbsp;<a data-tooltip-position="top" aria-label="https://www.cloudflare.com/learning/dns/dns-records/dns-cname-record/" rel="noopener nofollow" class="external-link" href="https://www.cloudflare.com/learning/dns/dns-records/dns-cname-record/" target="_blank">CNAME record</a>.</p></div><div class="el-p"><p dir="auto"><img title="DNS Record Request Sequence - CNAME record for subdomain" alt="DNS Record Request Sequence - DNS query to CNAME record for subdomain blog.cloudflare.com" src="https://cf-assets.www.cloudflare.com/slt3lc6tev37/1O1o3jhs0ztWsD00k8RLIJ/f33c1793a7e21cb92678c1f35ef1b245/dns_record_request_sequence_cname_subdomain.png" referrerpolicy="no-referrer"></p></div><div class="el-p"><p dir="auto">There is a key difference between many DNS services and the one that Cloudflare provides. Different DNS recursive resolvers such as&nbsp;<a data-tooltip-position="top" aria-label="https://www.cloudflare.com/cloudflare-vs-google-dns/" rel="noopener nofollow" class="external-link" href="https://www.cloudflare.com/cloudflare-vs-google-dns/" target="_blank">Google DNS</a>, OpenDNS, and providers like Comcast all maintain data center installations of DNS recursive resolvers. These resolvers allow for quick and easy queries through optimized clusters of DNS-optimized computer systems, but they are fundamentally different than the nameservers hosted by Cloudflare.</p></div><div class="el-p"><p dir="auto">Cloudflare maintains infrastructure-level nameservers that are integral to the functioning of the Internet. One key example is the&nbsp;<a data-tooltip-position="top" aria-label="https://blog.cloudflare.com/f-root/" rel="noopener nofollow" class="external-link" href="https://blog.cloudflare.com/f-root/" target="_blank">f-root server network</a>&nbsp;which Cloudflare is partially responsible for hosting. The F-root is one of the root level DNS nameserver infrastructure components responsible for the billions of Internet requests per day. Our&nbsp;<a data-tooltip-position="top" aria-label="https://www.cloudflare.com/learning/cdn/glossary/anycast-network/" rel="noopener nofollow" class="external-link" href="https://www.cloudflare.com/learning/cdn/glossary/anycast-network/" target="_blank">Anycast network</a>&nbsp;puts us in a unique position to handle large volumes of DNS traffic without service interruption.</p></div></div></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="What are the steps in a DNS lookup?" dir="auto" class="heading" id="What_are_the_steps_in_a_DNS_lookup?"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>What are the steps in a DNS lookup?</h2><div class="heading-children"><div class="el-p"><p dir="auto">For most situations, DNS is concerned with a domain name being translated into the appropriate IP address. To learn how this process works, it helps to follow the path of a DNS lookup as it travels from a web browser, through the DNS lookup process, and back again. Let's take a look at the steps.</p></div><div class="el-p"><p dir="auto">Note: Often DNS lookup information will be cached either locally inside the querying computer or remotely in the DNS infrastructure. There are typically 8 steps in a DNS lookup. When DNS information is cached, steps are skipped from the DNS lookup process which makes it quicker. The example below outlines all 8 steps when nothing is cached.</p></div><div class="el-h4 heading-wrapper"><h4 data-heading="The 8 steps in a DNS lookup:" dir="auto" class="heading" id="The_8_steps_in_a_DNS_lookup:"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>The 8 steps in a DNS lookup:</h4><div class="heading-children"><div class="el-ol"><ol>
<li data-line="0" dir="auto">A user types ‘example.com’ into a web browser and the query travels into the Internet and is received by a DNS recursive resolver.</li>
<li data-line="1" dir="auto">The resolver then queries a DNS root nameserver (.).</li>
<li data-line="2" dir="auto">The root server then responds to the resolver with the address of a Top Level Domain (TLD) DNS server (such as .com or .net), which stores the information for its domains. When searching for example.com, our request is pointed toward the .com TLD.</li>
<li data-line="3" dir="auto">The resolver then makes a request to the .com TLD.</li>
<li data-line="4" dir="auto">The TLD server then responds with the IP address of the domain’s nameserver, example.com.</li>
<li data-line="5" dir="auto">Lastly, the recursive resolver sends a query to the domain’s nameserver.</li>
<li data-line="6" dir="auto">The IP address for example.com is then returned to the resolver from the nameserver.</li>
<li data-line="7" dir="auto">The DNS resolver then responds to the web browser with the IP address of the domain requested initially.</li>
</ol></div><div class="el-p"><p dir="auto">Once the 8 steps of the DNS lookup have returned the IP address for example.com, the browser is able to make the request for the web page:</p></div><div class="el-ol"><ol start="10">
<li data-line="0" dir="auto">The browser makes a&nbsp;<a data-tooltip-position="top" aria-label="https://www.cloudflare.com/learning/ddos/glossary/hypertext-transfer-protocol-http/" rel="noopener nofollow" class="external-link" href="https://www.cloudflare.com/learning/ddos/glossary/hypertext-transfer-protocol-http/" target="_blank">HTTP</a>&nbsp;request to the IP address.</li>
<li data-line="1" dir="auto">The server at that IP returns the webpage to be rendered in the browser (step 10).</li>
</ol></div><div class="el-p"><p dir="auto"><img title="Complete DNS Lookup and Webpage Query" alt="Complete DNS Lookup and Webpage Query - 10 steps" src="https://cf-assets.www.cloudflare.com/slt3lc6tev37/1NzaAqpEFGjqTZPAS02oNv/bf7b3f305d9c35bde5c5b93a519ba6d5/what_is_a_dns_server_dns_lookup.png" referrerpolicy="no-referrer"></p></div></div></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="What is a DNS resolver?" dir="auto" class="heading" id="What_is_a_DNS_resolver?"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>What is a DNS resolver?</h2><div class="heading-children"><div class="el-p"><p dir="auto">The DNS resolver is the first stop in the DNS lookup, and it is responsible for dealing with the client that made the initial request. The resolver starts the sequence of queries that ultimately leads to a URL being translated into the necessary IP address.</p></div><div class="el-p"><p dir="auto">Note: A typical uncached DNS lookup will involve both recursive and iterative queries.</p></div><div class="el-p"><p dir="auto">It's important to differentiate between a&nbsp;<a data-tooltip-position="top" aria-label="https://www.cloudflare.com/learning/dns/what-is-recursive-dns/" rel="noopener nofollow" class="external-link" href="https://www.cloudflare.com/learning/dns/what-is-recursive-dns/" target="_blank">recursive DNS</a>&nbsp;query and a recursive DNS resolver. The query refers to the request made to a DNS resolver requiring the resolution of the query. A DNS recursive resolver is the computer that accepts a recursive query and processes the response by making the necessary requests.</p></div><div class="el-p"><p dir="auto"><img title="DNS Recursive Query" alt="DNS recursive query goes from DNS client to DNS recursive resolver" src="https://cf-assets.www.cloudflare.com/slt3lc6tev37/rOXBgctX2gaXNDqP5ktek/7086a97e00525159c6bd9318819c2287/dns_recursive_query.png" referrerpolicy="no-referrer"></p></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="What are the types of DNS queries?" dir="auto" class="heading" id="What_are_the_types_of_DNS_queries?"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>What are the types of DNS queries?</h2><div class="heading-children"><div class="el-p"><p dir="auto">In a typical DNS lookup three types of queries occur. By using a combination of these queries, an optimized process for DNS resolution can result in a reduction of distance traveled. In an ideal situation cached record data will be available, allowing a DNS name server to return a non-recursive query.</p></div><div class="el-h4 heading-wrapper"><h4 data-heading="3 types of DNS queries:" dir="auto" class="heading" id="3_types_of_DNS_queries:"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>3 types of DNS queries:</h4><div class="heading-children"><div class="el-ol"><ol>
<li data-line="0" dir="auto"><strong>Recursive query</strong>&nbsp;- In a recursive query, a DNS client requires that a DNS server (typically a DNS recursive resolver) will respond to the client with either the requested resource record or an error message if the resolver can't find the record.</li>
<li data-line="1" dir="auto"><strong>Iterative query</strong>&nbsp;- in this situation the DNS client will allow a DNS server to return the best answer it can. If the queried DNS server does not have a match for the query name, it will return a referral to a DNS server authoritative for a lower level of the domain namespace. The DNS client will then make a query to the referral address. This process continues with additional DNS servers down the query chain until either an error or timeout occurs.</li>
<li data-line="2" dir="auto"><strong>Non-recursive query</strong>&nbsp;- typically this will occur when a DNS resolver client queries a DNS server for a record that it has access to either because it's authoritative for the record or the record exists inside of its cache. Typically, a DNS server will cache DNS records to prevent additional bandwidth consumption and load on upstream servers.</li>
</ol></div></div></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="What is DNS caching? Where does DNS caching occur?" dir="auto" class="heading" id="What_is_DNS_caching?_Where_does_DNS_caching_occur?"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>What is DNS caching? Where does DNS caching occur?</h2><div class="heading-children"><div class="el-p"><p dir="auto">The purpose of caching is to temporarily stored data in a location that results in improvements in performance and reliability for data requests. DNS caching involves storing data closer to the requesting client so that the DNS query can be resolved earlier and additional queries further down the DNS lookup chain can be avoided, thereby improving load times and reducing bandwidth/CPU consumption. DNS data can be cached in a variety of locations, each of which will store DNS records for a set amount of time determined by a&nbsp;<a data-tooltip-position="top" aria-label="https://www.cloudflare.com/learning/cdn/glossary/time-to-live-ttl/" rel="noopener nofollow" class="external-link" href="https://www.cloudflare.com/learning/cdn/glossary/time-to-live-ttl/" target="_blank">time-to-live (TTL)</a>.</p></div><div class="el-h4 heading-wrapper"><h4 data-heading="Browser DNS caching" dir="auto" class="heading" id="Browser_DNS_caching"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Browser DNS caching</h4><div class="heading-children"><div class="el-p"><p dir="auto">Modern web browsers are designed by default to cache DNS records for a set amount of time. The purpose here is obvious; the closer the DNS caching occurs to the web browser, the fewer processing steps must be taken in order to check the cache and make the correct requests to an IP address. When a request is made for a DNS record, the browser cache is the first location checked for the requested record.</p></div><div class="el-p"><p dir="auto">In Chrome, you can see the status of your DNS cache by going to chrome://net-internals/#dns.</p></div></div></div><div class="el-h4 heading-wrapper"><h4 data-heading="Operating system (OS) level DNS caching" dir="auto" class="heading" id="Operating_system_(OS)_level_DNS_caching"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Operating system (OS) level DNS caching</h4><div class="heading-children"><div class="el-p"><p dir="auto">The operating system level DNS resolver is the second and last local stop before a DNS query leaves your machine. The process inside your operating system that is designed to handle this query is commonly called a “stub resolver” or DNS client. When a stub resolver gets a request from an application, it first checks its own cache to see if it has the record. If it does not, it then sends a DNS query (with a recursive flag set), outside the local network to a DNS recursive resolver inside the Internet service provider (ISP).</p></div><div class="el-p"><p dir="auto">When the recursive resolver inside the ISP receives a DNS query, like all previous steps, it will also check to see if the requested host-to-IP-address translation is already stored inside its local persistence layer.</p></div><div class="el-p"><p dir="auto">The recursive resolver also has additional functionality depending on the types of records it has in its cache:</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">If the resolver does not have the&nbsp;<a data-tooltip-position="top" aria-label="https://www.cloudflare.com/learning/dns/dns-records/dns-a-record/" rel="noopener nofollow" class="external-link" href="https://www.cloudflare.com/learning/dns/dns-records/dns-a-record/" target="_blank">A records</a>, but does have the&nbsp;<a data-tooltip-position="top" aria-label="https://www.cloudflare.com/learning/dns/dns-records/dns-ns-record/" rel="noopener nofollow" class="external-link" href="https://www.cloudflare.com/learning/dns/dns-records/dns-ns-record/" target="_blank">NS records</a>&nbsp;for the authoritative nameservers, it will query those name servers directly, bypassing several steps in the DNS query. This shortcut prevents lookups from the root and .com nameservers (in our search for example.com) and helps the resolution of the DNS query occur more quickly.</li>
<li data-line="1" dir="auto">If the resolver does not have the NS records, it will send a query to the TLD servers (.com in our case), skipping the root server.</li>
<li data-line="2" dir="auto">In the unlikely event that the resolver does not have records pointing to the TLD servers, it will then query the root servers. This event typically occurs after a DNS cache has been purged.</li>
</ol></div><div class="el-p"><p dir="auto">Learn about what differentiates&nbsp;<a data-tooltip-position="top" aria-label="https://www.cloudflare.com/dns/" rel="noopener nofollow" class="external-link" href="https://www.cloudflare.com/dns/" target="_blank">Cloudflare DNS</a>&nbsp;from other DNS providers.</p></div><div class="mod-footer mod-ui pixel-banner" style="--pixel-banner-width: -24px; --pixel-banner-scrollbar-width: 12px;"></div></div></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="graph-view-wrapper"><div class="sidebar-section-header">Interactive Graph</div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div></div><script defer="">let rs = document.querySelector(".sidebar-right"); rs.classList.add("is-collapsed"); if (window.innerWidth > 768) rs.classList.remove("is-collapsed"); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></body></html>